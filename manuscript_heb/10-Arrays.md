<div dir="rtl">

# יכולות מערך משופרות

המערך הינו אובייקט ג'אווהסקריפט במהותו. עם זאת, בעוד היבטים אחרים של ג'אווהסקריפט התפתחו במהלך הזמן, מערכים נותרו זהים עד ש-
ECMAScript 5
הציגה מספר שיטות להפוך אותם לקלים יותר לשימוש.
ECMAScript 6
המשיכה את מגמת השיפור של המערכים על ידי הוספת פונקציונליות רבה יותר, כמו שיטות יצירה חדשות של מערכים, הפיכת כמה שיטות שימושיות לנוחות יותר לכתיבת מערכים מאופיינים.

## יצירת מערך

לפני
ECMAScript 6
היו שתי דרכים עיקריות ליצירת מערכים: קונסטרקטור (בנאי) של מערך
(`array`)
ותחביר מילולי. שתי הגישות מצריכות רישום של פריטי המערך בנפרד ובדרך כלל הן מוגבלות למדי.
אפשרויות להמרת אובייקט דמוי מערך (כלומר, אובייקט עם אינדקס מספרי ורכיב
`length`
) למערך היו גם הן מוגבלות ולעיתים קרובות דרשו קוד נוסף.
כדי להקל על יצירת מערכים בג'אווהסקריפט
ECMAScript 6
הוסיפה את המתודות
<span dir="ltr">`Array.of()`</span>
ו-
<span dir="ltr">`Array.from()`</span>

<span dir="ltr">### Array.of()</span>

אחת הסיבות ש-
ECMAScript 6
הוסיפה מתודות חדשות ליצירת מערכים בג'אווהסקריפט היא לסייע למפתחים להמנע מהצורך להשתמש בקונסטרקטור של מערך.
הקונסטרקטור
<span dir="ltr">`new Array()`</span>
מתנהג באופן שונה בהתבסס על סוג וכמות הארגומנטים שהועברו אליו.

כך לדוגמא:
<span dir="ltr">
```js
let items = new Array(2);
console.log(items.length); // 2
console.log(items[0]); // undefined
console.log(items[1]); // undefined
```</span>

זאת לעומת
<span dir="ltr">
```js
items = new Array("2");
console.log(items.length); // 1
console.log(items[0]); // "2"

items = new Array(1, 2);
console.log(items.length); // 2
console.log(items[0]); // 1
console.log(items[1]); // 2

items = new Array(3, "2");
console.log(items.length); // 2
console.log(items[0]); // 3
console.log(items[1]); //"2"
```</span>

כאשר מועבר לקונסטרקטור של המערך ערך מספרי כארגומנט יחיד ערך זה יהווה את האורך
`length`
של המערך. לעומת זאת, אם מועבר לארגומנט של הקונסטרקטור ערך יחיד שאינו מספרי, ערך זה יהפוך לפריט האחד והיחיד במערך. אם מספר ערכים (מספריים או לא) מועברים לקונסטרקטור כארגומנטים ערכים אלו יהפכו אף הם לפריטים במערך. התנהגות זו הינה מסוכנת ומבלבלת כיוון שלא תמיד נוכל לדעת אלו סוגים של מידע הועברו לקונסטרקטור בתור ארגומנטים.

ECMAScript 6
מציגה את המתודה
<span dir="ltr">`Array.of()`</span>
כדי לפתור את הבעיה הזו.
<span dir="ltr">`Array.of()`</span>
פועלת באופו דומה לקונסטרקטור של
`Array`
אך אין לה מקרה מיוחד לגבי ערך מספרי יחיד. המתודה הזו יוצרת תמיד מערך המכיל את הארגומנטים שלו למספר הארגומנטים או לסוגם.
להלן מספר דוגמאות המשתמשות בשיטת
<span dir="ltr">`Array.of()`</span>

<span dir="ltr">
```js
let items = Array.of(1, 2);
console.log(items.length); // 2
console.log(items[0]); // 1
console.log(items[1]); // 2

items = Array.of(2);
console.log(items.length); // 1
console.log(items[0]); // 2

items = Array.of("2");
console.log(items.length); // 1
console.log(items[0]); // "2"
```</span>

בכדי ליצור מערך באמצעות מתודת
<span dir="ltr">`Array.of()`</span>
פשוט נעביר לה את הערכים הרצויים במערך. כך למשל בדוגמא הראשונה לעיל נוצר מערך המכיל שני מספרים. המערך שבדוגמא השניה מכיל מספר אחד והמערך האחרון מכיל מחרוזת אחת. הדבר דומה לשימוש במערך ליטראלי ואכן ניתן להשתמש במערך מילולי במקום
<span dir="ltr">`Array.of()`</span>
ליצירת מערכים מקוריים במרבית המקרים.
אך אם נרצה להעביר את הקונסטרקטור של המערך לפונקציה אז יתכן שנרצה להשתמש במתודה
<span dir="ltr">`Array.of()`</span>
על מנת להבטיח התנהגות עקבית.

לדוגמא:
<span dir="ltr">
```js
function createArray(arrayCreator, value) {
  return arrayCreator(value);
}

let items = createArray(Array.of, value);
```</span>

בקוד זה הפונקציה
<span dir="ltr">`createArray()`</span>
מקבלת פונקציה היוצרת מערך וערך להכניס לתוך המערך. נוכל להעביר
<span dir="ltr">`Array.of()`</span>
בתור הארגומנט הראשון לפונקציה
<span dir="ltr">`createArray()`</span>
על מנת ליצור מערך חדש. במקרה זה יהיה זה מסוכן להעביר רק
`Array`
ישירות מבלי שנוכל להבטיח שהערך
`(value)`
לא יהיה מספר.

- שימו לב: המתודה
<span dir="ltr">`Array.of()`</span>
  אינה משתמשת במאפיין
  `Symbol.species`
  (הנדון בפרק 9) על מנת לקבוע את סוג הערך החוזר. במקום זאת היא משתמשת בקונסטרקטור הנוכחי
  (`this`
  בתוך מתודת ה-
  <span dir="ltr">`of()`</span>)
  על מנת לקבוע את סוג הנתונים הנכון להחזרה.

</div>